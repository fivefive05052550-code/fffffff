<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Share Flex Message Ready</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: #eef2ff;
    }
    .msg {
      display: none;
      padding: 20px 30px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      font-size: 18px;
      text-align: center;
      color: #333;
    }
    #errorMsg {
      color: #d9534f;
      word-break: break-word;
      max-width: 80vw;
    }
  </style>
</head>
<body>

<div class="msg" id="loadingMsg">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå...</div>
<div class="msg" id="successMsg">‚úÖ ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‡πÜ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</div>
<div class="msg" id="errorMsg">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå</div>

<script>
const flexMessage = {
  type: "flex",
  altText: "üìö ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ô‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô ‡πÇ‡∏î‡∏¢ ‡∏ô‡∏ï‡∏ó.‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà 2",
  contents: {
    type: "carousel",
    contents: [
      {
        type: "bubble",
        hero: {
          type: "image",
          url: "https://image2url.com/r2/default/images/1768927293799-71ffe8b0-32cb-4673-bcf2-c2c3f18bc84a.jpg",
          size: "full",
          aspectRatio: "20:13",
          aspectMode: "cover"
        },
        body: {
          type: "box",
          layout: "vertical",
          contents: [
            { type: "text", text: "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠", weight: "bold", size: "xl" }
          ]
        },
        footer: {
          type: "box",
          layout: "vertical",
          contents: [
            {
              type: "button",
              style: "link",
              action: {
                type: "uri",
                label: "‡πÅ‡∏ä‡∏£‡πå",
                uri: "https://fivefive05052550-code.github.io/gfggfgfgfg/"
              }
            }
          ]
        }
      },

      {
        type: "bubble",
        hero: {
          type: "image",
          url: "https://image2url.com/r2/default/images/1768921512701-e3fea66f-a5ea-4802-84a1-381c2ccddd3a.jpg",
          size: "full",
          aspectRatio: "20:13",
          aspectMode: "cover"
        },
        body: {
          type: "box",
          layout: "vertical",
          contents: [
            { type: "text", text: "‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ Coding Python", weight: "bold", size: "lg" },
            { type: "text", text: "‡πÄ‡∏•‡πà‡∏°‡∏ó‡∏µ‡πà 1", size: "sm", color: "#666666" }
          ]
        },
        footer: {
          type: "box",
          layout: "vertical",
          contents: [
            {
              type: "button",
              style: "link",
              action: {
                type: "uri",
                label: "‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",
                uri: "https://youtube.com/shorts/B749Yq9WQi4"
              }
            }
          ]
        }
      },

      {
        type: "bubble",
        hero: {
          type: "image",
          url: "https://image2url.com/r2/default/images/1768921563456-2f15629d-3e95-4a6d-9837-f48ccdb006cb.jpg",
          size: "full",
          aspectRatio: "20:13",
          aspectMode: "cover"
        },
        body: {
          type: "box",
          layout: "vertical",
          contents: [
            { type: "text", text: "‡∏û‡∏π‡∏î‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå", weight: "bold", size: "lg" },
            { type: "text", text: "‡πÄ‡∏•‡πà‡∏°‡∏ó‡∏µ‡πà 2", size: "sm", color: "#666666" }
          ]
        },
        footer: {
          type: "box",
          layout: "vertical",
          contents: [
            {
              type: "button",
              style: "link",
              action: {
                type: "uri",
                label: "‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠",
                uri: "https://youtube.com/shorts/QdV_ueSxEzo"
              }
            }
          ]
        }
      },

      {
        type: "bubble",
        hero: {
          type: "image",
          url: "https://image2url.com/r2/default/images/1768921705671-4e700a1c-ac89-4a70-bbe6-32e99ca2ca96.jpg",
          size: "full",
          aspectRatio: "20:13",
          aspectMode: "cover"
        },
        body: {
          type: "box",
          layout: "vertical",
          contents: [
            { type: "text", text: "‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÄ‡∏≠‡∏≤‡∏≠‡∏¢‡∏π‡πà", weight: "bold", size: "lg" },
            { type: "text", text: "‡πÄ‡∏•‡πà‡∏°‡∏ó‡∏µ‡πà 3", size: "sm", color: "#666666" }
          ]
        },
        footer: {
          type: "box",
          layout: "vertical",
          contents: [
            {
              type: "button",
              style: "link",
              action: {
                type: "uri",
                label: "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",
                uri: "https://youtube.com/shorts/EwZYNz5mDLo"
              }
            }
          ]
        }
      }
    ]
  }
};

function displayMessage(id) {
  document.querySelectorAll('.msg').forEach(el => el.style.display = 'none');
  document.getElementById(id).style.display = 'block';
}

async function main() {
  displayMessage('loadingMsg');

  try {
    await liff.init({ liffId: "2007236505-Lbr300GA" });

    if (!liff.isLoggedIn()) {
      liff.login();
      return;
    }

    if (!liff.isApiAvailable("shareTargetPicker")) {
      throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ LINE");
    }

    const result = await liff.shareTargetPicker([flexMessage]);

    if (result) {
      displayMessage('successMsg');
      setTimeout(() => liff.closeWindow(), 2000);
    } else {
      liff.closeWindow();
    }

  } catch (err) {
    document.getElementById('errorMsg').innerHTML =
      `‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:<br>${err.message}`;
    displayMessage('errorMsg');
  }
}

main();
</script>

</body>
</html>
